# 第五章 编码与实现

​	本章主要阐述自助洗衣系统各个功能模块实现界面，介绍不同用户使用产品的操作流程，根据系统详细设计，对前期设计进行编码与实现。

## 5.1 普通客户访问端

​	普通客户访问系统时主要使用移动设备访问，因位业务场景需要用户使用移动设备扫描二维码。如果使用pc设备访问普通客户访问端，系统会提示使用移动端访问。使用pc设备访问普通客户访问端如图5-1所示。

---pic 5-1---

​	使用移动端正常访问普通客户访问端如图5-2所示。

---pic 5-2---

### 5.1.1用户注册与登陆

​	未经登陆的用户只能访问系统首页，若想要系统的功能，须登陆系统，考虑到移动端设备输入验证码的不便，验证机制选用了滑动验证的机制。登陆页面如图5-3所示。

---pic 5-3---

​	若是第一次使用系统的用户，则可以点击登陆界面下的"新用户？点这里"，注册新的账户。注册界面如图5-4所示。

---pic 5-4---

​	当用户成功登录后，系统会给出反馈，并在"我的"界面显示出当前登陆的用户名。登陆验证通过如图5-5、5-6所示。

---pic 5-5---

---pic 5-6---

### 5.1.2用户扫描二维码使用设备

​	整个系统的核心业务逻辑就是扫描二维码开启设备，由于条件原因，并没有一台真正的洗衣机被开启，在系统中，使用状态实体模拟设备的运转。

​	用户点击主页右上角的扫一扫按钮可以进入扫描二维码页面，由于是扫描二维码涉及到系统硬件调用，以及超文本标记语言以及Vue的限制，整个扫描二维码扫描的数据传输需要建立在Https协议上，所以，整套用户客户端都需要Https协议来访问。在开发阶段，依旧是由于成本的原因，我使用的是JDK工具生成了一台Key，使tomcat可以使用Https协议。由于网路上资料的空缺和不完整性，这个难点研究了好久才得以解决，更详细的资料可以参见我在论坛上发表的一篇解决相关问题的文章。https://www.kuangstudy.com/bbs/1357347062152179714

​	扫描二维码界面如图5-7所示。

---pic 5-7---

​	当系统成功识别二维码后，会展示设备的信息，如果设备是可以使用的的，显示设备的设备可提供的服务。设备可使用状态如图5-8所示。

---pic 5-8---

​	当被识别的设备处在运行状态时，系统不会提供服务信息，设备运行状态如图5-9所示。

---pic 5-9---

​	当被识别的设备处在维护状态时，系统不会提供服务信息，设备维护状态如图5-10所示。

---pic 5-10---

​	用户还可使用另外一种方式发现设备，就是点击左下角的洗烘按钮，这样可以发现当前可以使用的所有设备。所有设备如图5-11所示。

---pic 5-11---

​	当用户发现一个正常设备并选定一种服务后，系统会给出当前订单金额，用户可以点击支付按钮支付费用，如图5-12所示

---pic 5-12---

​	当用户点击支付按钮时，需要输入支付密码，支付密码的输入错误次数限定为5次，超过次数将会冻结此次支付，支付密码界面如图5-13所示。

---pic 5-13---

​	输入错误密码如图5-14所示。

---pic 5-14---

​	冻结支付如图5-15所示。

---pic 5-15---

​	当用户成功支付后，系统会为用户预留5分钟时间，这段时间用户可以将衣服放进洗衣机，加入洗衣粉洗衣液等，当一切准备完成后，用户点击开始洗衣，设备就正式开始运转了。准备页面如图5-16所示。

---pic 5-16---

​	当用户点击开始洗衣后，设备就开始运转了，这是用户可以在订单界面查看到正在进行中的订单，也可以点击历史订单查看之前完成的订单。正在进行中的订单如图5-17所示。

---pic 5-17---

历史订单如图5-18所示。

---pic 5-18---

## 5.2 管理员客户访问端

### 5.2.1管理员登陆

​	由于管理员端部署在安全的服务器环境中，管理员用户直接分配用户名密码，管理员直接登陆即可。后台管理系统登陆界面如图5-19所示。

---pic 5-19---

### 5.2.2订单分析与月度数据分析

​	系统管理员需要对系统产生的订单与收入进行分析，分析的原始数据存在数据库中，系统会统计这些数据返回给前端，前端使用Echarts将数据形成柱状图折线图等，这些图在系统首页，方便管理人员直观的查看业绩。订单分析与月度数据分析页面如图5-20所示。

---pic 5-20---

### 5.2.3设备管理

​	系统管理员需要对系统中的设备进行管理，设备管理储了简单的增删改查还需要能导入导出Excel表格，获取设备二维码等功能。设备管理界面如图5-21所示。

---pic 5-21---

#### 5.2.3.1新增设备

​	当系统需要新增设备管理员需要点击新增设备按钮，填写设备信息，就可以添加新设备，如图5-22所示。

---pic 5-22---

#### 5.2.3.2删除设备

​	当管理员要删除设备时，系统为了保证安全性，不会做物理删除，而是将伪删除标记位更改，这样在出现问题时，可以追溯到已经被删除的设备。删除设备如图5-23所示。

---pic 5-23---

​	被删除的设备会被存入设备回收站，保留基本信息。

#### 5.2.3.3修改设备

​	管理员需要修改设备信息时，需要点击修改设备按钮，修改当前设备的信息，修改设备信息界面如图5-24所示。

---pic 5-24---

#### 5.2.3.4多条件查询设备信息

​	在大量设备中查找某一个或几个设备时，需要使用设备右上角的多条件查询框，输入有关信息，即可得到相关信息，多条件查询设备信息界面如图5-25所示。

---pic 5-25---

#### 5.2.3.5查看设备二维码

​	每台设备的二维码需要管理员分发，管理员可以生成这个设备的二维码并下载下来，查看二维码界面如图5-26所示。

---pic 5-26---

​	点击下载按钮可以将图片保存本地，如图5-27所示。

---pic 5-27---

#### 5.2.3.6导出Excel表格

​	点击导出表格即可将系统上的数据以excel表格形式保存到本地，如图5-28所示。

---pic 5-28---

### 5.2.4用户管理

​	当系统管理员需要管理用户时，需要点击用户按钮，系统会提供用户信息，管理员可以封禁用户，也可以多条件查询某一用户。用户管理界面如图5-29所示。

---pic 5-29---

#### 5.2.4.1封禁用户

​	系统管理员能封禁一些不良用户，被封禁的用户不会直接物理删除，而是保留基本信息。封禁用户如图5-30所示。

---pic 5-30---

#### 5.2.4.2多条件查询用户

​	管理员需要查询某个用户时，可以在右上方输入用户相关信息，系统会返回有关用户，多条件查询用户如图5-31所示。

---pic 5-31---

### 5.2.5订单管理

​	系统管理员需要管理系统中的订单信息，查看订单的种类，服务类型，状态，还可以使删除无用的订单，订单管理界面如图5-32所示。

---pic 5-32---

#### 5.2.5.1删除订单

​	管理员需要清除一些已经没有意义的订单，需点击订单删除按钮，删除操作不会真的删除，删除后的订单信息会被存放到订单回收站，删除订单操作如图5-33所示。

---pic 5-33---

#### 5.2.5.2多条件查询订单

​	管理员需要依照条件查询某些订单时，需要在页面右上角输入条件，即可查询有关订单信息。如图5-34所示。

---pic 5-34---

### 5.2.6垃圾箱

​	垃圾箱中存储了一些管理员已经删除的数据，为保证系统安全，这些数据不会被物理删除，而是存放在这里，便于后期使用。

#### 5.2.6.1设备回收站

​	设备回收站中存放了被管理员删除的设备，这些设备不会再被用户访问与生效，但会保存基本信息，设备回收站如图5-35所示。

---pic 5-35---

#### 5.2.6.2用户回收站

​	用户回收站存储了被封禁的用户，这些用户无法再登陆系统，但回收站存储了他的基本信息，用户回收站如图5-36所示。

---pic 5-36---

#### 5.2.6.3订单回收站

​	订单回收站存储了一些被管理员失效的订单，这些订单的信息不会被访问，但会保留在订单回收站中，订单回收站如图5-37所示。

---pic 5-37---

### 5.2.7设备分布

​	管理员需要设备的位置信息，系统使用Echarts组件的地图功能，标注了每台设备的地理位置，设备分布页面如图5-38所示。

---pic 5-38---

## 5.3 本章小结

​	本章主要阐述了自助洗衣系统客户端与管理员端的设计与实现，按照业务逻辑与不同功能介绍系统功能与业务流程，展示系统界面，介绍系统的使用流程，完成系统的编码与实现。

