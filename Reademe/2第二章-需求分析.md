# 第二章 需求分析

​	本章是自助洗衣系统的需求分析，在系统设计之初形成，作为系统设计的依据、作为项目验收的标准之一。首先对系统进行可行性分析，其次分析业务流程，结合业务流程和用例，分析系统的功能需求与非功能需求。

## 2.1 可行性分析

​	项目的可行性分析是必要的，为保证课题的科学性、严谨性，项目需在国家规划和法律指导下开展，分析前期投入资产是否可行，技术上是否成熟，项目是否符合社会需求。足以看出，可行性分析是需求分析中重要的一部分。本文从经济、技术、社会环境三个角度出发，深度探究课题的可行性。

### 2.1.1 经济可行性分析

​	本系统在开发阶段，使用的是开源免费的框架与库，所以不需要支付技术支持的费用，采用的开发工具同样是开源免费的，但是系统采用模块化微服务架构，在部署时需要多个服务器，服务器成本可能会较高，但相应的，维护成本会降低。

​	在系统开发运行后，可以解决很多人的洗衣不便的问题，同时每台设备还能够带来收入。由此可得，自助洗衣系统带来的经济回报远超前期的投入。

### 2.1.2 技术可行性分析

​	本系统后台开发使用了Spring Cloud框架作为每个Spring Boot微服务的管理者，每一个后台服务由一个个Spring  Boot项目构建，再使用Fegin将服务与服务间联通，构成RPC框架，最后服务内使用Ribbon做负载均衡策略，最后使用Hystrix做流量高峰的服务熔断与降级。

​	整体后台的流量入口采用了Spring Cloud的Zuul作为任何进入后台请求的路由网关，分发请求，同时校验身份。以上所有的服务共同注册在Eureka注册中心，从而使服务与服务之间产生关联。

​	整个后台系统就由一个个解耦的小模块构建起来，这样做的好处就是可以灵活的插拔更新不同的模块的不同功能，便于灰度更新，不影响系统整体的运行。

​	在展示层使用Vue-Cli快速构建基于web的客户端展示层，并使用Element-ui作为图表等插件，快速构建一套基于Vue的前端展示页面。

### 2.1.3 社会环境可行性分析

​	自改革开放以来，我国都在大力发展城市化，到现在十四五阶段，我国大力建设现代化中心都市圈，快速发展的同时也面临着不可避免地问题：居民的生活问题得不到很好解决，这时候互联网的优势就得以体现了。自助洗衣系统可以高效率的处理大数量的数据，分析人口密集程度。合理分配设备，解决人们的洗衣需求。

## 2.2 功能需求

​	本小节将利用利用业务流程图、用例图、数据流图、数据字典等软甲开发必要的图对系统进行功能性需求分析，总结系统的功能性需求。

### 2.2.1 业务流程

​	用户根据设备二维码识别设备，根据需要洗衣的种类和数量选择服务。用户完成支付并确认开启订单，系统通知设备开始运转并改变设备内状态，创建订单信息。待洗衣机工作结束后通知系统，系统通知用户取走衣物并改变洗衣机状态。管理员负责管理设备的维护信息。洗衣核心业务流程图如图2-1所示。

​                      -----------------------------------------------------------

### 2.2.2 用例分析

​	下面的文字主要通过用例图进行用例分析，用例图从系统用户角度描述系统使用者与系统内部各个功能之间的关系。

​	目前系统主要有客户端与后台管理系统两大部分。客户端是用户进入系统、使用系统各个功能的入口；后台管理系统用来管理设备、用户与订单，还可以下载设备信息表格，分析月度数据。

​	普通用户主要是使用系统启动某台设备。用户用例图如图2-2所示。

​                      -----------------------------------------------------------

​	系统管理员主要负责管理设备信息、管理订单信息、管理用户信息、生成设备二维码、统计月度订单信息。管理员作为系统中的重要角色，有自己单独的客户端。

​	管理员主要是使用系统管理和统计系统中产生的信息。用户用例图如图2-3所示。

​                      -----------------------------------------------------------

### 2.2.3 数据分析

​	下面文字将对系统的数据流向进行分析。数据分析从用户与系统、模块与模块间数据交互进行分析，使用数据流图与数据字典进行描述。数据流图负责呈现数据的交换与交互过程；数据字段负责解释每个数据的内容与具体含义。

#### 2.2.3.1 数据流图

​	在数据传输、处理与存储的角度来看，数据流图是一种有效的、图形化的方式，以图形的方式直观的表达系统逻辑功能，并按照分层的思想，逐渐细化每一层的数据的传输处理过程。

​	通过分析系统外部使用者使用系统时将会产生的数据与数据在系统内部流转过程，得出自助洗衣系统的数据流图。顶层数据流图主要描述用户与系统的交互。系统外部实体主要有普通用户与系统管理员，数据流的的内容主要围绕用户信息，设备信息，订单信息，费用等方面，系统顶层数据流图如图2-4所示。

​                      -----------------------------------------------------------

​	由于自助洗衣系统采用微服务架构，进行了模块拆分，整个系统由已下6个微服务构成，分别是注册中心、路由网关、权限认证中心、用户处理服务、设备处理服务以及订单管理服务，每个模块负责且只负责处理一个功能有关的数据流，将系统产生的数据流细分到每个模块得到0层数据流图。系统0层数据流图如图2-5所示。

​                      -----------------------------------------------------------

​	在自助洗衣系统中，用户可以使用扫描二维码来识别这台设备，获取这台设备的信息以及这台设备所提供的服务，选择一种服务开启设备；如果这台设备正在被使用或正在维修，用户则不能达到设备能提供的服务信息，但是可以得到设备信息。若设备遇到了故障，用户可以提交反馈到管理员系统。自助洗衣系统用户端1层数据流图如图2-6所示。

​                      -----------------------------------------------------------

​	在自助洗衣系统的设计中，管理员用于一套专门的客户端，用来管理系统中的各种资源信息，管理员可以获得设备的二维码，封禁不良用户，增加新的设备，导出系统订单，也可以统计月度经营信息。自助洗衣系统管理员端1层数据流图如图2-7所示。

​                      -----------------------------------------------------------

#### 2.2.3.1 数据字典

​	数据字典对所有的数据流和数据存储做出了详细说明，是数据信息的合集，系统数据流说明如表2-1所示。

| 数据流名     | 组成                                  |
| ------------ | ------------------------------------- |
| 用户个人信息 | 用户名+密码+用户昵称                  |
| 设备唯一标识 | 设备唯一身份码                        |
| 设备服务信息 | 设备类型+服务类型+金额                |
| 订单信息     | 用户ID+设备唯一标识+服务类型+订单状态 |
| 设备二维码   | 二进制图片文件流                      |
| 导出表       | 二进制Excel表格文件流                 |
| 月度数据分析 | 销售总额+星期销售额+星期热度          |

​	系统数据存储说明如表2-2所示。

| 编号 | 文件名     | 说明             | 流入数据流                 | 流出数据流                     |
| ---- | ---------- | ---------------- | -------------------------- | ------------------------------ |
| D1   | 用户信息库 | 存放所有用户信息 | 用户个人信息               | 用户个人信息                   |
| D2   | 设备信息库 | 存放所有设备信息 | 设备服务信息、设备唯一标识 | 导出表、设备信息、设备二维码   |
| D3   | 订单信息库 | 存放所有订单信息 | 订单信息、设备唯一标识     | 导出表、月度数据分析、订单信息 |



### 2.2.4 功能描述

系统的用户有2种：普通用户和系统管理员。不同的用户使用不同的客户端，不同客户端有着不同的功能。

1.普通用户的功能描述

(1) 可以注册账号

(2) 可以修改自己的密码

(3) 可以通过扫描二维码访问特定设备

(4) 可以选择特定服务创建订单

(5) 可以查询到自己的当前进行中订单

(6) 可以查询到自己的历史订单

(7) 可以提交消息给系统管理员

(8) 可以修改自己的支付密码

2.系统管理员的功能描述

(1) 可以使用后台管理系统

(2) 可以查询到所有用户

(3) 可以封禁不良用户

(4) 可以通过设备唯一标识或设备创建时间查询某台或某些特定设备

(5) 可以修改设备信息

(6) 可以使用Excel导入新设备

(7) 可以将系统设备导出为Excel表格

(8) 可以将系统用户导出为Excel表格

(9) 可以获得设备的二维码

(10) 可以将设备放入回收站

(11) 可以查看系统所有订单

(12) 可以查询某一条特定订单

(13) 可以导出订单为Excel表格

(14) 可以分析最近消费时间、销售额、订单量

(15) 可以查看设备位置

## 2.3 性能需求

1.系统支持超过600以上的并发量

2.响应时间应小于3秒

3.系统要提供7*24小时服务

4.系统采用微服务架构，应能够横向扩展，灰度更新，不应出现404等报错页面，应有相应的熔断与服务降级机制

5.系统应采用合理的负载均衡策略

6系统应有良好的可扩展性，便于后续产品更新与技术迭代

## 2.4 本章小结

​	本章从经济、技术和社会环境对自助洗衣系统进行可行性分析，得出系统的可行性解决方案。使用数据流图和数据字典对系统进行功能需求分析，使用用例图、数据流图、数据字典，直观的表明系统构建工作的终点与难点，将业务流程清晰化、可视化。最后对系统的稳定性和可扩展性提出性能需求。